BEGIN;

DROP TABLE IF EXISTS "Videos", "Tags"; 

CREATE TABLE "Videos" (
    "id" INT PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY, 
    "name" VARCHAR(255) NOT NULL,
    "description" TEXT, 
    "url" TEXT NOT NULL,
    "created_at" TIMESTAMPTZ NOT NULL DEFAULT CURRENT_TIMESTAMP,
    "updated_at" TIMESTAMPTZ
); 

CREATE TABLE "Tags" (
    "id" INT PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY, 
    "value" TEXT NOT NULL UNIQUE
);

CREATE TABLE "M2M_TagsVideos" (
    "id" INT PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
    "tag_id" INT, 
    "video_id" INT
);

COMMIT;